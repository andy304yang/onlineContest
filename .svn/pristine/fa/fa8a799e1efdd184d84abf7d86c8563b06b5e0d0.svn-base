<template>
  <div class="app-container">
    <!-- 弹出作品框 -->
    <el-dialog title="作品详情" :visible.sync="dialogFormVisible" width="80%">
      <el-tabs>
        <el-tab-pane label="作品基本信息">
          <div class="details-item">
            作品名称： {{ WorksDetails.worksList.worksname }}
          </div>
          <div class="details-item">
            团队名字： {{ WorksDetails.worksList.teamname }}
          </div>
          <div class="details-item">
            团队成员：
            <span v-for="(item, index) in WorksDetails.authorList" :key="index" style="margin-right: 20px">
              {{ item }}
            </span>
          </div>
          <div class="details-item">
            学校： {{ WorksDetails.worksList.school }}
          </div>
          <div class="details-item">
            作品指导老师： {{ WorksDetails.worksList.teacher }}
          </div>
          <div class="details-item">
            指导老师单位： {{ WorksDetails.worksList.unit }}
          </div>
          <div class="details-item">
            作品简介： {{ WorksDetails.worksList.introduce }}
          </div>
          <div class="details-item">
            作品类型： {{ WorksDetails.worksList.type }}
          </div>
        </el-tab-pane>
        <el-tab-pane label="作品设计思路">
          <div class="details-item">
            作品设计思路：
          </div>
          <div class="details-item">
            {{ WorksDetails.worksList.design }}
          </div>
        </el-tab-pane>
        <el-tab-pane label="作品图片展示">
          <div class="details-item">
            <a :href="WorksDetails.worksList.pdf" target="_blank">点击预览作品ppt</a>
          </div><br>
          <div class="details-item">
            作品展示：
          </div>
          <el-image v-for="(url, index) in WorksDetails.imageList" :key="index" style="width: 80%; height: 60%" :src="url" />
        </el-tab-pane>
        <el-tab-pane label="作品演示">
          <div class="details-item">
            视频观赏：
          </div>
          <video :src="WorksDetails.worksList.video" controls class="video" width="100%" />
        </el-tab-pane>
        <el-tab-pane label="作品评价">
          <div v-if="WorksDetails.scoreList">
            <div v-for="item in WorksDetails.scoreList" :key="item" class="details-item">
              评委： {{ item.judge }}
              <span style="margin-left: 100px">评分： {{ item.score }}</span>
            </div>
          </div>
          <div class="details-item">
            总得分：{{ WorksDetails.worksList.score }}
          </div>
        </el-tab-pane>
      </el-tabs>
    </el-dialog>
  </div>
</template>

<script>
import { getWorkDetails } from '@/api/common'

export default {
  name: 'WorkDetails',
  data() {
    return {
      dialogFormVisible: false,
      WorksDetails: {
        authorList: [],
        worksList: {
          worksname: '',
          introduce: '',
          design: '',
          date: '',
          teacher: '',
          unit: '',
          teamname: '',
          match_project: '',
          match_name: '',
          video: '',
          score: '',
          type: '',
          document: '',
          pdf: ''
        },
        imageList: [],
        scoreList: []
      }
    }
  },
  methods: {
    popWorkDetails(wid) {
      getWorkDetails(wid).then(response => {
        this.dialogFormVisible = true
        this.WorksDetails = response.obj
      })
    }
  }
}
</script>
<style scoped>
  .details-item {
    font-size: 18px;
    margin-bottom: 20px;
  }
</style>
